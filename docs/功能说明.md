# ESP32 智能环境监控与语音助手 - 功能说明文档

## 1. 硬件规格

### 1.1 核心组件

- 主控:NODEMCU ESP32S 开发板
- 音频输入: 麦克风模块 INMP441 I2S 、
- 音频输出：扬声器模块 MAX98357A I2S，
- 显示: 0.91 IIC OLED 128x32

### 1.2 接口定义

#### GPIO 接口定义

- **I2S 音频输入(INMP441 麦克风)**

  - GPIO32: I2S BCLK (位时钟)
  - GPIO25: I2S LRCLK (左右声道时钟)
  - GPIO33: I2S DATA (数据输入)
  - GND: 接地
  - VDD: 3.3V 电源

- **I2S 音频输出(MAX98357A 扬声器)**

  - GPIO26: I2S BCLK (位时钟)
  - GPIO27: I2S LRCLK (左右声道时钟)
  - GPIO14: I2S DATA (数据输出)
  - GND: 接地
  - VIN: 5V 电源
  - SD: 3.3V 或 NC (静音控制，高电平启用)

- **I2C 显示屏(0.91 寸 OLED)**
  - GPIO21: SDA (数据线)
  - GPIO22: SCL (时钟线)
  - GND: 接地
  - VCC: 3.3V 电源
  - 设备地址: 0x3C

## 2. 功能说明

### 2.1 启动流程

- 初始化 I2S 麦克风、I2S 扬声器、I2C OLED 显示屏
- 初始化网络连接、同步时间
- 启动麦克风音频采集、语音识别 (ASR) 、语音合成 (TTS)、语音播放

### 2.1 智能语音助手

#### 2.1.1 语音助手基础流程：

- 识别 vol>10 为有效音频输入
- STEP1. 音频 ASR 识别 转文本
- STEP2. 文本输入大模型进行推理
- STEP3. 推理结输入 TTS 合成音频
- STEP4. 播放音频
  上述四步骤数据流式处理，实现实时语音交互。
